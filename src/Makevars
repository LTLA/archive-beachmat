RHDF5LIB_LIBS=`echo 'Rhdf5lib::pkgconfig("PKG_CXX_LIBS")'|\
    "${R_HOME}/bin/R" --vanilla --slave`
PKG_LIBS=$(RHDF5LIB_LIBS)

.PHONY: all libbeachmat

all: libbeachmat $(SHLIB)

libbeachmat: $(SHLIB)
	mkdir -p "${R_PACKAGE_DIR}/include/beachmat"
	cp *.h "${R_PACKAGE_DIR}/include/beachmat"
	ar rc libbeachmat.a *.o
	mv $< libbeachmat.so
	mkdir -p "${R_PACKAGE_DIR}/lib"
	mv libbeachmat.* "${R_PACKAGE_DIR}/lib"

shlib-clean: clean

clean: 
	rm -f libbeachmat.*
