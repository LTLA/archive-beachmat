PKG_LIBS=${R_HOME}/library/Rhdf5lib/lib/libhdf5_cpp.a ${R_HOME}/library/Rhdf5lib/lib/libhdf5.a -ldl -lz

.PHONY: all libbeachmat

all: libbeachmat $(SHLIB)

libbeachmat: $(SHLIB)
	mkdir -p "${R_PACKAGE_DIR}/include/beachmat"
	cp *.h "${R_PACKAGE_DIR}/include/beachmat"
	ar rc libbeachmat.a *.o
	mv $< libbeachmat.so
	mkdir -p "${R_PACKAGE_DIR}/lib"
	mv libbeachmat.* "${R_PACKAGE_DIR}/lib"

shlib-clean: clean

clean: 
	rm -f libbeachmat.*
